<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fale Conosco</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>Adicione o Contato</h1>
    <p>Envie o seu contato para mais informações!</p>

    <form class="contact-form">
      <label for="nome">Nome</label>
      <input type="text" id="nome" name="nome" placeholder="seu nome completo" required />

      <label for="email">E-mail</label>
      <input type="email" id="email" name="email" placeholder="seuemail@exemplo.com" required />

      <label for="telefone">Telefone</label>
      <input type="telefone" id="telefone" name="telefone" placeholder="(18)0000-0000" required />

      <label for="mensagem">Mensagem</label>
      <textarea id="mensagem" name="mensagem" rows="5" placeholder="Digite qualquer mensagem aqui..." required></textarea>

      <label for="assunto">Assunto</label>
      <textarea id="assunto" name="assunto" rows="5" placeholder="Digite qual o assunto aqui..." required></textarea>

      <button id="btn_enviar">Enviar</button>
      <p id="resultado"></p>
    </form>
  </div>
</body>
<script>

    document.getElementById("btn_enviar").addEventListener("click", async () => {
     
        const nome = document.getElementById("nome").value
        const email = document.getElementById("email").value
        const assunto = document.getElementById("assunto").value
        const mensagem = document.getElementById("mensagem").value
        const telefone = document.getElementById("telefone").value
        try {
            const resposta = await fetch(`http://localhost:3000/contatos`,{
                method:"POST",
                headers:{
                    "Accept":"application/json",
                    "Content-Type":"application/json"
                },

         
                body:JSON.stringify({
                    "nome": nome,
                    "email": email,
                    "assunto": assunto,
                    "mensagem": mensagem,
                    "telefone": telefone
                })

            })
           
            const resultadoElement = document.getElementById("resultado");

            if(resposta.ok == true){
                const dados = await resposta.json()
                resultadoElement.innerText = dados.resposta
                resultadoElement.style.color = "green"

            }else{
             
                const dados = await resposta.json()
                resultadoElement.innerText = `Erro (${resposta.status}): ${dados.resposta || "Falha ao processar requisição."}`
                resultadoElement.style.color = "red"
            }
        } catch (error) {
       
            document.getElementById("resultado").innerText = "Erro de Conexão: O servidor está offline ou inacessível."
            document.getElementById("resultado").style.color = "darkred"
            console.error("Erro na requisição Fetch:", error)
        }
    })
</script>

